(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mainSysUser","chunk-43418c31"],{"0055":function(e,t,r){"use strict";var n=r("4bfd"),a=r.n(n);t["default"]=a.a},"0631":function(e,t,r){var n=r("c20f"),a=r("2f85"),s=r("184b"),o="[object DOMException]",i="[object Error]";function u(e){if(!a(e))return!1;var t=n(e);return t==i||t==o||"string"==typeof e.message&&"string"==typeof e.name&&!s(e)}e.exports=u},"0768":function(e,t,r){"use strict";var n=r("556c"),a=r.n(n);t["default"]=a.a},3824:function(e,t,r){var n=r("ff23"),a=9007199254740991;function s(e){return n(e)&&e>=-a&&e<=a}e.exports=s},4600:function(e,t,r){"use strict";var n=r("98f7"),a=r.n(n);t["default"]=a.a},"4bfd":function(e,t,r){e.exports={header:"page-c687488282745351737a955495a9b17d",headerInner:"page-5fd71007d2a318fd3c48437090d0a4fb",title:"page-d1a2fbce8a74f128c9c5f2b86e6f8821",inner:"page-eb9c66952357b7faaec4ccca9c010df9",back:"page-a86cfb1bd65dbeb39b587ec9ba2463c3"}},"556c":function(e,t,r){e.exports={page:"detail_id-7ee1a0509fd833a910337c5e79293970",title:"detail_id-ffdb3a30d451baebcf41d3dbf67dfd54"}},"579a":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cd-icon",e._g(e._b({attrs:{url:e.url,prefix:e.prefix}},"cd-icon",e.$attrs,!1),e.$listeners))},a=[],s={name:"HlIcon",componentName:"HlIcon",components:{},mixins:[],inheritAttrs:!1,props:{src:String,alt:String,paddingTop:String},data:function(){return{url:"//at.alicdn.com/t/font_1102612_ycfmo3zzjr.js",prefix:"hulo-icon"}},computed:{},methods:{},created:function(){},mounted:function(){}},o=s,i=r("17cc"),u=Object(i["a"])(o,n,a,!1,null,null,null),c=u.exports;r.d(t,"a",function(){return c})},"752c":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("hl-page",{class:e.$style.page,attrs:{title:e.userName,"show-back":""}},[r("cd-panel",{attrs:{line:""}},[r("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n      系统信息\n      "),r("div",{staticStyle:{float:"right"}},[r("hl-status-text",{staticStyle:{"margin-top":"12px","margin-right":"16px"},attrs:{color:e.user.status?"success":"disable"}},[e._v("\n          "+e._s(e.user.status?"启用":"失效")+"\n        ")]),r("el-button",{class:e.$style.updateButton,attrs:{type:"primary",size:"mini"},on:{click:e.update}},[e._v("修改")])],1)]),r("el-row",{class:e.$style.row,attrs:{gutter:16}},[r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"账户:","value-bold":""}},[e._v("\n          "+e._s(e.user.userName)+"\n        ")])],1),r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"系统角色:","value-bold":""}},[e._v("\n          "+e._s(e.user.roleName)+"\n        ")])],1),r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"创建时间:","value-bold":""}},[e._v("\n          "+e._s(e.user.entryDate)+"\n        ")])],1)],1)],1),r("cd-panel",{staticStyle:{"margin-top":"16px"},attrs:{title:"联系信息",line:""}},[r("el-row",{class:e.$style.row,attrs:{gutter:16}},[r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"手机:","value-bold":""}},[e._v("\n          "+e._s(e.user.mobile)+"\n        ")])],1),r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"邮箱:","value-bold":""}},[e._v("\n          "+e._s(e.user.email)+"\n        ")])],1),r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"电话:","value-bold":""}},[e._v("\n          "+e._s(e.user.tel)+"\n        ")])],1),r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"微信:","value-bold":""}},[e._v("\n          "+e._s(e.user.weixin)+"\n        ")])],1),r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"qq:","value-bold":""}},[e._v("\n          "+e._s(e.user.qq)+"\n        ")])],1)],1)],1),r("cd-panel",{staticStyle:{"margin-top":"16px"},attrs:{title:"个人信息",line:""}},[r("el-row",{class:e.$style.row,attrs:{gutter:16}},[r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"实际名:","value-bold":""}},[e._v("\n          "+e._s(e.user.lastName)+"\n        ")])],1),r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"性别:","value-bold":""}},[e._v("\n          "+e._s(e.user.sex)+"\n        ")])],1),r("el-col",{attrs:{xs:24,sm:12,md:8}},[r("cd-text-kv",{attrs:{label:"生日:","value-bold":""}},[e._v("\n          "+e._s(e.user.birthDay)+"\n        ")])],1)],1)],1)],1)},a=[],s=r("f27c"),o=r.n(s),i=r("ce9b"),u=r("579a"),c=r("a937"),l=r("f087");function d(e,t,r,n,a,s,o){try{var i=e[s](o),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function o(e){d(s,n,a,o,i,"next",e)}function i(e){d(s,n,a,o,i,"throw",e)}o(void 0)})}}var f={name:"MainParent_Sys_User_DetailId",components:{HlPage:i["a"],HlIcon:u["a"],HlStatusText:c["a"]},withLoading:!0,data:function(){return{user:{}}},computed:{userName:function(){return this.get_(this.user,"lastName")||this.get_(this.user,"userName")}},methods:{loadData$:function(){var e=p(o.a.mark(function e(){var t;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["default"].get(this.getParam_("id"));case 2:t=e.sent,t.sex="M"===t.gender?"男":"女",this.user=t;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),update:function(){}},created:function(){this.loadData()}},h=f,m=r("0768"),v=r("17cc");function g(e){this["$style"]=m["default"].locals||m["default"]}var b=Object(v["a"])(h,n,a,!1,g,null,null);t["default"]=b.exports},"7c6d":function(e,t,r){"use strict";var n=r("e1d2"),a=n["a"].makeBaseRequestIns(),s={};s.paging=n["a"].makePagingRequest("/roles"),s.add=function(e){return a.post("/roles",e)},s.update=function(e){return a.put("/roles",e)},t["a"]=s},"804e":function(e,t,r){},8332:function(e,t,r){e.exports={inner:"edit_-jpid-31bae0160aa0ac3c0f8afcb14d86116e",footer:"edit_-jpid-079bd64c547601f05afc7ed2f83ffd8a"}},"98f7":function(e,t,r){e.exports={varPrimaryColor:"#409EFF",varPrimaryColor30:"#d9ecff",varPrimaryColor20:"#a6d2ff",varSecondaryColor:"#FFA354",varSuccessColor:"#00cc66",varWarningColor:"#ff9900",varErrorColor:"#ff3300",varImportantColor:"#23364C",varActionColor:"#2680D8",varActionColor20:"#174d81",varActionColor30:"#0f3356",varTitleColor:"#23364C",varText40Color:"#333333",varText30Color:"#444444",varText20Color:"#666666",varText10Color:"#999999",varDisableColor:"#F2F2F2",varMoneyColor:"#364B66"}},"9eae":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("hl-page",{class:e.$style.page,attrs:{title:"用户管理"}},[r("template",{slot:"header-inner"},[r("div",[r("cd-button",{staticStyle:{transform:"translateY(-3px)"},attrs:{size:"mini",type:"primary"},on:{click:e.add}},[r("hl-icon",{attrs:{type:"tianjia"}}),e._v("\n          \n        创建用户\n      ")],1)],1)]),r("cd-panel",{class:e.$style.list,attrs:{"hide-header":""}},[r("cd-table",{attrs:{data:e.users}},[r("cd-table-column",{attrs:{prop:"lastName",label:"实际名","show-overflow-tooltip":"",width:"120"}}),r("cd-table-column",{attrs:{prop:"userName",label:"用户名","show-overflow-tooltip":"",width:"140"}}),r("cd-table-column",{attrs:{prop:"roleName",label:"角色",width:"120","show-overflow-tooltip":""}}),r("cd-table-column",{attrs:{prop:"mobile",label:"手机",width:"100"}}),r("cd-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}),r("cd-table-column",{attrs:{prop:"enabled",label:"启用",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("hl-status-text",{attrs:{color:t.row.status?"success":"disable"}},[e._v("\n            "+e._s(t.row.status?"启用":"失效")+"\n          ")])]}}])}),r("cd-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("cd-text-action",{on:{click:function(r){return e.update(t.row)}}},[e._v("修改")]),e._v("\n           \n          "),r("cd-text-action",{on:{click:function(r){return e.detail(t.row)}}},[e._v("详情")])]}}])})],1),r("div",{staticStyle:{"text-align":"right","margin-top":"16px"}},[r("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":[10,15,25,40],"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next"},on:{"update:currentPage":function(t){e.pageIndex=t},"update:current-page":function(t){e.pageIndex=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.loadData,"current-change":e.loadData}})],1)],1)],2)},a=[],s=r("f27c"),o=r.n(s),i=r("ce9b"),u=r("579a"),c=r("a937"),l=r("f087");function d(e,t,r,n,a,s,o){try{var i=e[s](o),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function o(e){d(s,n,a,o,i,"next",e)}function i(e){d(s,n,a,o,i,"throw",e)}o(void 0)})}}var f={name:"MainParent_User_User",components:{HlPage:i["a"],HlIcon:u["a"],HlStatusText:c["a"]},withLoading:!0,data:function(){return{users:[],total:0,pageIndex:1,pageSize:10}},computed:{},methods:{loadData$:function(){var e=p(o.a.mark(function e(){var t;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["default"].paging({},this.pageIndex,this.pageSize);case 2:t=e.sent,this.users=t.content||[],this.total=t.total;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),update:function(e){this.push_("/sys/user/".concat(e.userId,"/edit"))},detail:function(e){this.push_("/sys/user/detail/".concat(e.userId))},add:function(){this.push_("/sys/user/add/edit")}},created:function(){this.loadData()}},h=f,m=r("aaca"),v=r("17cc");function g(e){this["$style"]=m["default"].locals||m["default"]}var b=Object(v["a"])(h,n,a,!1,g,null,null);t["default"]=b.exports},a937:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{class:e.$style.status},[r("hl-icon",{style:e.sty,attrs:{type:"status-point"}}),e._t("default")],2)},a=[],s=r("6332"),o=r.n(s),i=r("2584"),u=r.n(i),c=r("c83a"),l=r.n(c),d=r("579a"),p={},f={name:"HlStatusText",componentName:"HlStatusText",components:{HlIcon:d["a"]},mixins:[],inheritAttrs:!1,props:{color:String},data:function(){return{}},computed:{sty:function(){var e={};return this.color&&(e.color=p[this.color]?p[this.color]:this.color),e}},methods:{},created:function(){var e=this;p=Object.keys(this.$style).filter(function(e){return l()(e,"varText")&&u()(e,"Color")}).reduce(function(t,r){var n=t,a=o()(r.slice(3,-5));return n[a]=e.$style[r],n},{title:this.$style.varTitleColor,primary:this.$style.varPrimaryColor,secondary:this.$style.varSecondaryColor,success:this.$style.varSuccessColor,warning:this.$style.varWarningColor,error:this.$style.varErrorColor,important:this.$style.varImportantColor,action:this.$style.varActionColor,disable:this.$style.varDisableColor,money:this.$style.varMoneyColor})}},h=f,m=r("4600"),v=r("17cc");function g(e){this["$style"]=m["default"].locals||m["default"]}var b=Object(v["a"])(h,n,a,!1,g,null,null),w=b.exports;r.d(t,"a",function(){return w})},aaca:function(e,t,r){"use strict";var n=r("804e"),a=r.n(n);t["default"]=a.a},ce9b:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("cd-page",e._g(e._b({},"cd-page",e.$attrs,!1),e.$listeners),[e.hideHeader?e._e():e._t("header",[r("div",{class:e.$style.header},[e.showBack?r("hl-icon",{class:e.$style.back,attrs:{type:"fanhui"},nativeOn:{click:function(t){return e.back()}}}):e._e(),e.title?r("span",{class:e.$style.title},[e._v(e._s(e.title))]):e._e(),r("div",{class:e.$style.headerInner},[e._t("header-inner")],2)],1)]),r("div",{class:e.innerCls},[e._t("default")],2)],2)},a=[],s=r("579a"),o={name:"HlPage",componentName:"HlPage",components:{HlIcon:s["a"]},mixins:[],inheritAttrs:!1,props:{hideHeader:Boolean,title:String,innerClass:String,showBack:Boolean},data:function(){return{}},computed:{innerCls:function(){return this.innerClass?[this.$style.inner].concat(this.innerClass):[this.$style.inner]}},methods:{back:function(){this.$router.go(-1)}},created:function(){},mounted:function(){}},i=o,u=r("0055"),c=r("17cc");function l(e){this["$style"]=u["default"].locals||u["default"]}var d=Object(c["a"])(i,n,a,!1,l,null,null),p=d.exports;r.d(t,"a",function(){return p})},d132:function(e,t,r){"use strict";var n=r("8332"),a=r.n(n);t["default"]=a.a},d269:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("hl-page",{class:e.$style.page,attrs:{title:e.userName,"show-back":""}},[r("el-form",{ref:"form",staticStyle:{"padding-bottom":"60px"},attrs:{model:e.user,rules:e.rules,size:"medium","label-width":"120px"}},[r("cd-panel",{attrs:{title:"系统信息",line:""}},[r("div",{class:e.$style.inner},[r("el-form-item",{attrs:{label:"账号:",prop:"userName"}},[r("el-input",{attrs:{placeholder:"请设置用户登录使用的账户名"},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),r("el-form-item",{attrs:{label:"密码:",prop:"password"}},[r("el-input",{attrs:{disabled:Boolean(e.user.userId),placeholder:"请设置用户初始密码","show-password":""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),r("el-form-item",{attrs:{label:"系统角色:",prop:"roleId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:Boolean(e.user.userId),placeholder:"请选择用户所属角色"},model:{value:e.user.roleId,callback:function(t){e.$set(e.user,"roleId",t)},expression:"user.roleId"}},e._l(e.roles,function(t){return r("el-option",{key:t.roleId,attrs:{value:t.roleId,label:t.roleName}},[e._v(e._s(t.roleName))])}),1)],1),r("el-form-item",{attrs:{label:"是否生效:"}},[r("el-switch",{model:{value:e.user.actived,callback:function(t){e.$set(e.user,"actived",t)},expression:"user.actived"}})],1)],1)]),r("cd-panel",{staticStyle:{"margin-top":"16px"},attrs:{title:"联系信息",line:""}},[r("div",{class:e.$style.inner},[r("el-form-item",{attrs:{label:"手机:",prop:"mobile"}},[r("cd-input-phone",{attrs:{placeholder:"请设置用户联系手机号"},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}})],1),r("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[r("el-input",{attrs:{placeholder:"请设置用户联系邮箱"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),r("el-form-item",{attrs:{label:"座机:",prop:"tel"}},[r("el-input",{attrs:{placeholder:"请设置用户联系座机"},model:{value:e.user.tel,callback:function(t){e.$set(e.user,"tel",t)},expression:"user.tel"}})],1),r("el-form-item",{attrs:{label:"微信:",prop:"weixin"}},[r("el-input",{attrs:{placeholder:"请设置用户联系微信"},model:{value:e.user.weixin,callback:function(t){e.$set(e.user,"weixin",t)},expression:"user.weixin"}})],1),r("el-form-item",{attrs:{label:"qq:",prop:"qq"}},[r("el-input",{attrs:{placeholder:"请设置用户联系qq"},model:{value:e.user.qq,callback:function(t){e.$set(e.user,"qq",t)},expression:"user.qq"}})],1)],1)]),r("cd-panel",{staticStyle:{"margin-top":"16px"},attrs:{title:"个人信息",line:""}},[r("div",{class:e.$style.inner},[r("el-form-item",{attrs:{label:"实际名:",prop:"lastName"}},[r("el-input",{attrs:{placeholder:"请设置用户实际名字"},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}})],1),r("el-form-item",{attrs:{label:"性别:",prop:"gender"}},[r("el-switch",{attrs:{"active-text":"男","inactive-text":"女"},model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}})],1),r("el-form-item",{attrs:{label:"生日:",prop:"birthDay"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择用户的生日"},model:{value:e.user.birthDay,callback:function(t){e.$set(e.user,"birthDay",t)},expression:"user.birthDay"}})],1)],1)])],1),r("cd-scum",{attrs:{"offset-bottom":0}},[r("cd-footer",{class:e.$style.footer},[r("cd-button",{on:{click:e.cancel}},[e._v("取消")]),r("cd-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保存")])],1)],1)],1)},a=[],s=r("f27c"),o=r.n(s),i=r("ce9b"),u=r("579a"),c=r("a937"),l=r("f087"),d=r("7c6d"),p=r("0162");function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){h(e,t,r[t])})}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,a,s,o){try{var i=e[s](o),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function v(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function o(e){m(s,n,a,o,i,"next",e)}function i(e){m(s,n,a,o,i,"throw",e)}o(void 0)})}}var g={name:"MainParent_Sys_User_Edit",components:{HlPage:i["a"],HlIcon:u["a"],HlStatusText:c["a"]},withLoading:!0,data:function(){return{id:"",user:{actived:!0},rules:{userName:[{required:!0,message:"请输入用户账号",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请设置用户初始密码",trigger:"blur"},{validator:this.makeValidator_(function(){var e=v(o.a.mark(function e(t,r){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(p["a"].string.isPassword(r)){e.next=2;break}throw new Error("长度6-20个字符，包括大写字母、小写字母、数字、下划线至少两种");case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()),trigger:"blur"}],roleId:[{required:!0,message:"请输入用户账号",trigger:"change"}],mobile:[{required:!0,message:"请输入用户联系手机",trigger:"blur"}],email:[{required:!0,message:"请输入用户联系邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱",trigger:"blur"}],tel:[{type:"string",pattern:p["a"].regexp.constant.LANDLINE,message:"请输入正确的座机号码",trigger:"blur"}],weixin:[{type:"string",pattern:p["a"].regexp.constant.WEIXIN_ACCOUNT,message:"请输入正确的微信账号",trigger:"blur"}],qq:[{type:"string",pattern:p["a"].regexp.constant.QQ,message:"请输入正确的qq账号",trigger:"blur"}],lastName:[{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}]},roles:[]}},computed:{userName:function(){return"add"===this.id?"新增用户":this.get_(this.user,"lastName")||this.get_(this.user,"userName")}},methods:{loadData$:function(){var e=v(o.a.mark(function e(){var t,r;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].paging({},1,1e5);case 2:if(t=e.sent,this.roles=t.content||[],this.roleFlat=p["a"].array.identityMap(this.roles||[],"roleId"),"add"!==this.id){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,l["default"].get(this.id);case 9:r=e.sent,this.user=this.localize(r);case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),update$:function(){var e=v(o.a.mark(function e(){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs.form.validate();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e["catch"](0),this.$message.error("有数据填写错误,请认真核对"),e.abrupt("return");case 9:if("add"!==this.id){e.next=14;break}return e.next=12,l["default"].add(this.serialize());case 12:e.next=16;break;case 14:return e.next=16,l["default"].update(this.serialize());case 16:this.push_("/sys/user");case 17:case"end":return e.stop()}},e,this,[[0,5]])}));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.back_()},serialize:function(){var e=f({},this.user,{status:this.user.actived?1:0,roleCode:this.roleFlat[this.user.roleId].roleCode,roleName:this.roleFlat[this.user.roleId].roleName,gender:this.user.sex?"M":"W"});return"add"!==this.id&&delete e.password,e},localize:function(e){return f({},e,{actived:1===e.status,password:"asd123456",sex:"M"===e.gender})}},created:function(){this.id=this.getParam_("id"),this.loadData()}},b=g,w=r("d132"),y=r("17cc");function x(e){this["$style"]=w["default"].locals||w["default"]}var k=Object(y["a"])(b,n,a,!1,x,null,null);t["default"]=k.exports},e1d2:function(e,t,r){"use strict";r.d(t,"a",function(){return R});var n=r("f27c"),a=r.n(n),s=r("03c7"),o=r.n(s),i=r("2499"),u=r.n(i),c=r("c83a"),l=r.n(c),d=r("2901"),p=r.n(d),f=r("0631"),h=r.n(f),m=r("3824"),v=r.n(m),g=r("bf92"),b=r.n(g),w=r("7f43"),y=r.n(w),x=r("5ee4"),k=r.n(x),_=r("0162");function $(e,t,r,n,a,s,o){try{var i=e[s](o),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,a)}function I(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function o(e){$(s,n,a,o,i,"next",e)}function i(e){$(s,n,a,o,i,"throw",e)}o(void 0)})}}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t,r){return t&&S(e.prototype,t),r&&S(e,r),e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(){return window.$h.apiErrorPrefix||"__HSCF__ERROR__"}y.a.defaults.paramsSerializer=function(e){return k.a.stringify(e)};var R=function(){function e(t){var r=t.baseUrl,n=t.timeout,a=t.option,s=void 0===a?{}:a,o=t.requestSuccessInterceptor,i=void 0===o?e.authRequestInterceptor:o,u=t.requestErrorInterceptor,c=void 0===u?e.errorInterceptor:u,l=t.responseSuccessInterceptor,d=void 0===l?e.hscfResponseInterceptor:l,p=t.responseErrorInterceptor,f=void 0===p?e.errorInterceptor:p;q(this,e);var h=s;h.baseURL=r||s.baseUrl||e.getDefaultBaseUrl(),h.timeout=n||s.timeout||window.$h.requestTimeout,h.headers=s.headers||{},h.headers["Content-Type"]=s.headers["Content-Type"]||"application/json",this.option=h,this.axios=y.a.create(h),this.axios.interceptors.request.use(i,c),this.axios.interceptors.response.use(d,f)}return C(e,[{key:"getRequest",value:function(){return this.axios}}],[{key:"getDefaultBaseUrl",value:function(){return window.$h.baseUrl}},{key:"unauthRequestInterceptor",value:function(){var e=I(a.a.mark(function e(t){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"authRequestInterceptor",value:function(){var t=I(a.a.mark(function t(r){var n,s;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=r,!n.$notPermission){t.next=3;break}return t.abrupt("return",n);case 3:return t.prev=3,t.next=6,e._getToken();case 6:return s=t.sent,b()(n,"headers.Authorization",s),t.abrupt("return",n);case 11:throw t.prev=11,t.t0=t["catch"](3),new Error("".concat(T(),"L401-").concat(t.t0.message));case 14:case"end":return t.stop()}},t,null,[[3,11]])}));function r(e){return t.apply(this,arguments)}return r}()},{key:"_getToken",value:function(){var t=I(a.a.mark(function t(){var r,n,s,o,i,u,c,l,d;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=window.$h.getAuthInfo()||{},n=r.refreshToken,s=r.accessToken,o=r.lastUpdateTime,i=r.expiresIn,s){t.next=4;break}throw e._login(),new Error("你尚未登录,正在跳转到登录页面");case 4:if(n&&v()(o)&&v()(i)){t.next=6;break}return t.abrupt("return",s);case 6:if(u=(new Date).getTime(),c=u-o>=i-window.$h.refreshTokenTolerantTime,c){t.next=10;break}return t.abrupt("return",s);case 10:return e._refreshToken||(e._refreshToken=y.a.post("/auth/token",{grant_type:"refresh_token",refresh_token:n,client_secret:window.$h.clientSecret,client_id:window.$h.clientId},{baseURL:window.$h.authUrl,timeout:window.$h.requestTimeout,transformRequest:[function(e){return k.a.stringify(e)}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})),t.next=13,e._refreshToken;case 13:return l=t.sent,d=l.data,window.$h.bus.emit("setLoginInfo",{refreshToken:d.refresh_token,accessToken:d.access_token,lastUpdateTime:(new Date).getTime(),expiresIn:1e3*d.expires_in,scope:d.scope}),t.abrupt("return",s);case 17:case"end":return t.stop()}},t)}));function r(){return t.apply(this,arguments)}return r}()},{key:"_logout",value:function(){window.$h.bus.emit("logout")}},{key:"_login",value:function(){window.$h.bus.emit("login")}},{key:"_handleUnauthorized",value:function(){throw e._logout(),new Error("".concat(T(),"401-无权限，请重新登录"))}},{key:"makeRequestIns",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.$h.requestTimeout;if(p()(t))return new e({baseUrl:t,timeout:r}).getRequest();var n=t;return new e(n).getRequest()}},{key:"makeBaseRequestIns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t;return r.baseUrl=window.$h.baseUrl,new e(r).getRequest()}},{key:"makeBaseRequestInsWithUnauth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t;return r.baseUrl=window.$h.baseUrl,r.requestSuccessInterceptor=e.unauthRequestInterceptor,new e(r).getRequest()}},{key:"makeAuthRequestInsWithUnauthAndPlain",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t;r.baseUrl=window.$h.authUrl,r.requestSuccessInterceptor=e.unauthRequestInterceptor,r.responseSuccessInterceptor=e.plainDataResponseInterceptor;var n=new e(r).getRequest();return n}},{key:"makePagingRequest",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=s;if(l.pageNum=i,l.pageSize=u,c){var d=c.filter(function(e){return!o()(e.order)}).sort(function(e,t){return e.order-t.order}).map(function(e){return'"'.concat(e.prop,'":"').concat(e.order,'"')}),p="{".concat(d.join(","),"}");l._sortColumn=encodeURIComponent(p)}n&&(l=n(l));var f=r;f.params=l;var h=a||e.makeBaseRequestIns();return h.get(t,f)}}},{key:"makeFormDataRequest",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return function(s){var o,i=t,c=r;if(u()(c,"headers.Content-Type")||b()(c,"headers.Content-Type","multipart/form-data"),n){var l=n(s,r),d=l.url,p=l.formData,f=l.option;o=p,i=d,c=f}else o=new FormData,Object.keys(s).forEach(function(e){o.append(e,s[e])});var h=a||e.makeBaseRequestIns(),m=h.post(i,o,c);return m}}},{key:"makeUploadRequest",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return function(s,o){var i,u=r;u.onUploadProgress=function(e){o(e)},u.cancelToken=new y.a.CancelToken(function(e){i=e});var c=e.makeFormDataRequest(t,u,n,a)(s);return c.abort=i,c}}}]),e}();P(R,"errorInterceptor",function(){var e=I(a.a.mark(function e(t){var r,n,s,o;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t,h()(t)&&"Request failed with status code 401"===t.message)try{R._handleUnauthorized()}catch(n){r=n}throw p()(r)&&(r=new Error(r)),n=null,n=l()(r.message,T())?new Error(r.message.replace(T(),"")):new Error("L500-网络异常，发送请求失败"),s=n.message.split("-")[1],o=u()(window,"$c.$message.error"),o&&o(s),n;case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),P(R,"hscfResponseInterceptor",function(){var e=I(a.a.mark(function e(t){var r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_["a"].lang.strategy({200:function(){var e=I(a.a.mark(function e(){var r,n,s;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.data,n={200:function(){var e=I(a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r.data);case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),401:R._handleUnauthorized,700:function(){var e=I(a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw R._logout(),new Error("".concat(T(),"700-").concat(r.message));case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),760:function(){var e=I(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=u()(window,"$c.$message"),t&&t.closeAll(),n=u()(window,"$c.$confirm"),!n){e.next=6;break}return e.next=6,n(r.message,"提示",{confirmButtonText:"确定",type:"warning",showCancelButton:!1,closeOnClickModal:!1,closeOnPressEscape:!1});case 6:throw R._logout(),new Error("".concat(T(),"760-").concat(r.message));case 8:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},e.next=4,_["a"].lang.strategy(n,String(r.code),I(a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("".concat(T()).concat(r.code||"null","-").concat(r.message||"后台的数据结构有误"));case 1:case"end":return e.stop()}},e)})));case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}},e)}));function r(){return e.apply(this,arguments)}return r}(),401:R._handleUnauthorized},String(t.status),I(a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("".concat(T()).concat(t.status,"-网络出现错误, http状态码为:").concat(t.status));case 1:case"end":return e.stop()}},e)})));case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e["catch"](0),e.next=11,R.errorInterceptor(e.t0);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),P(R,"plainDataResponseInterceptor",function(){var e=I(a.a.mark(function e(t){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t.data);case 4:return e.prev=4,e.t0=e["catch"](0),e.next=8,R.errorInterceptor(e.t0);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}())},f087:function(e,t,r){"use strict";r.r(t);var n=r("6372"),a=r("e1d2");function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=a["a"].makeBaseRequestIns(),u=a["a"].makeAuthRequestInsWithUnauthAndPlain(),c={getCurrentUser:function(){return i.get("/users/currentUser")},login:function(e){return u.post("/auth/token",s({grantType:"password",clientId:n["a"].clientId,clientSecret:n["a"].clientSecret,scope:""},e))}};c.listLoginLogs=a["a"].makePagingRequest("/loginLogs"),c.paging=a["a"].makePagingRequest("/users"),c.get=function(e){return i.get("/users/".concat(e))},c.add=function(e){return i.post("/users",e)},c.update=function(e){return i.put("/users",e)},t["default"]=c},ff23:function(e,t,r){var n=r("baf2");function a(e){return"number"==typeof e&&e==n(e)}e.exports=a}}]);