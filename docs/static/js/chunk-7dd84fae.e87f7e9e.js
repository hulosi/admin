(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dd84fae"],{"0631":function(e,t,n){var r=n("c20f"),a=n("2f85"),o=n("184b"),u="[object DOMException]",s="[object Error]";function c(e){if(!a(e))return!1;var t=r(e);return t==s||t==u||"string"==typeof e.message&&"string"==typeof e.name&&!o(e)}e.exports=c},3824:function(e,t,n){var r=n("ff23"),a=9007199254740991;function o(e){return r(e)&&e>=-a&&e<=a}e.exports=o},"9e77":function(e,t,n){"use strict";n.r(t);var r=n("e1d2"),a=r["a"].makeBaseRequestIns(),o={getRoleMenus:function(){return a.get("/menus/roleMenus")}};t["default"]=o},e1d2:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n("f27c"),a=n.n(r),o=n("03c7"),u=n.n(o),s=n("2499"),c=n.n(s),i=n("c83a"),p=n.n(i),f=n("2901"),l=n.n(f),h=n("0631"),w=n.n(h),v=n("3824"),d=n.n(v),m=n("bf92"),g=n.n(m),k=n("7f43"),b=n.n(k),y=n("5ee4"),x=n.n(y),R=n("0162");function I(e,t,n,r,a,o,u){try{var s=e[o](u),c=s.value}catch(i){return void n(i)}s.done?t(c):Promise.resolve(c).then(r,a)}function q(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function u(e){I(o,r,a,u,s,"next",e)}function s(e){I(o,r,a,u,s,"throw",e)}u(void 0)})}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){return window.$h.apiErrorPrefix||"__HSCF__ERROR__"}b.a.defaults.paramsSerializer=function(e){return x.a.stringify(e)};var C=function(){function e(t){var n=t.baseUrl,r=t.timeout,a=t.option,o=void 0===a?{}:a,u=t.requestSuccessInterceptor,s=void 0===u?e.authRequestInterceptor:u,c=t.requestErrorInterceptor,i=void 0===c?e.errorInterceptor:c,p=t.responseSuccessInterceptor,f=void 0===p?e.hscfResponseInterceptor:p,l=t.responseErrorInterceptor,h=void 0===l?e.errorInterceptor:l;_(this,e);var w=o;w.baseURL=n||o.baseUrl||e.getDefaultBaseUrl(),w.timeout=r||o.timeout||window.$h.requestTimeout,w.headers=o.headers||{},w.headers["Content-Type"]=o.headers["Content-Type"]||"application/json",this.option=w,this.axios=b.a.create(w),this.axios.interceptors.request.use(s,i),this.axios.interceptors.response.use(f,h)}return U(e,[{key:"getRequest",value:function(){return this.axios}}],[{key:"getDefaultBaseUrl",value:function(){return window.$h.baseUrl}},{key:"unauthRequestInterceptor",value:function(){var e=q(a.a.mark(function e(t){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"authRequestInterceptor",value:function(){var t=q(a.a.mark(function t(n){var r,o;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=n,!r.$notPermission){t.next=3;break}return t.abrupt("return",r);case 3:return t.prev=3,t.next=6,e._getToken();case 6:return o=t.sent,g()(r,"headers.Authorization",o),t.abrupt("return",r);case 11:throw t.prev=11,t.t0=t["catch"](3),new Error("".concat(E(),"L401-").concat(t.t0.message));case 14:case"end":return t.stop()}},t,null,[[3,11]])}));function n(e){return t.apply(this,arguments)}return n}()},{key:"_getToken",value:function(){var t=q(a.a.mark(function t(){var n,r,o,u,s,c,i,p,f;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=window.$h.getAuthInfo()||{},r=n.refreshToken,o=n.accessToken,u=n.lastUpdateTime,s=n.expiresIn,o){t.next=4;break}throw e._login(),new Error("你尚未登录,正在跳转到登录页面");case 4:if(r&&d()(u)&&d()(s)){t.next=6;break}return t.abrupt("return",o);case 6:if(c=(new Date).getTime(),i=c-u>=s-window.$h.refreshTokenTolerantTime,i){t.next=10;break}return t.abrupt("return",o);case 10:return e._refreshToken||(e._refreshToken=b.a.post("/auth/token",{grant_type:"refresh_token",refresh_token:r,client_secret:window.$h.clientSecret,client_id:window.$h.clientId},{baseURL:window.$h.authUrl,timeout:window.$h.requestTimeout,transformRequest:[function(e){return x.a.stringify(e)}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})),t.next=13,e._refreshToken;case 13:return p=t.sent,f=p.data,window.$h.bus.emit("setLoginInfo",{refreshToken:f.refresh_token,accessToken:f.access_token,lastUpdateTime:(new Date).getTime(),expiresIn:1e3*f.expires_in,scope:f.scope}),t.abrupt("return",o);case 17:case"end":return t.stop()}},t)}));function n(){return t.apply(this,arguments)}return n}()},{key:"_logout",value:function(){window.$h.bus.emit("logout")}},{key:"_login",value:function(){window.$h.bus.emit("login")}},{key:"_handleUnauthorized",value:function(){throw e._logout(),new Error("".concat(E(),"401-无权限，请重新登录"))}},{key:"makeRequestIns",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.$h.requestTimeout;if(l()(t))return new e({baseUrl:t,timeout:n}).getRequest();var r=t;return new e(r).getRequest()}},{key:"makeBaseRequestIns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;return n.baseUrl=window.$h.baseUrl,new e(n).getRequest()}},{key:"makeBaseRequestInsWithUnauth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;return n.baseUrl=window.$h.baseUrl,n.requestSuccessInterceptor=e.unauthRequestInterceptor,new e(n).getRequest()}},{key:"makeAuthRequestInsWithUnauthAndPlain",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t;n.baseUrl=window.$h.authUrl,n.requestSuccessInterceptor=e.unauthRequestInterceptor,n.responseSuccessInterceptor=e.plainDataResponseInterceptor;var r=new e(n).getRequest();return r}},{key:"makePagingRequest",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],p=o;if(p.pageNum=s,p.pageSize=c,i){var f=i.filter(function(e){return!u()(e.order)}).sort(function(e,t){return e.order-t.order}).map(function(e){return'"'.concat(e.prop,'":"').concat(e.order,'"')}),l="{".concat(f.join(","),"}");p._sortColumn=encodeURIComponent(l)}r&&(p=r(p));var h=n;h.params=p;var w=a||e.makeBaseRequestIns();return w.get(t,h)}}},{key:"makeFormDataRequest",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return function(o){var u,s=t,i=n;if(c()(i,"headers.Content-Type")||g()(i,"headers.Content-Type","multipart/form-data"),r){var p=r(o,n),f=p.url,l=p.formData,h=p.option;u=l,s=f,i=h}else u=new FormData,Object.keys(o).forEach(function(e){u.append(e,o[e])});var w=a||e.makeBaseRequestIns(),v=w.post(s,u,i);return v}}},{key:"makeUploadRequest",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return function(o,u){var s,c=n;c.onUploadProgress=function(e){u(e)},c.cancelToken=new b.a.CancelToken(function(e){s=e});var i=e.makeFormDataRequest(t,c,r,a)(o);return i.abort=s,i}}}]),e}();$(C,"errorInterceptor",function(){var e=q(a.a.mark(function e(t){var n,r,o,u;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t,w()(t)&&"Request failed with status code 401"===t.message)try{C._handleUnauthorized()}catch(r){n=r}throw l()(n)&&(n=new Error(n)),r=null,r=p()(n.message,E())?new Error(n.message.replace(E(),"")):new Error("L500-网络异常，发送请求失败"),o=r.message.split("-")[1],u=c()(window,"$c.$message.error"),u&&u(o),r;case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),$(C,"hscfResponseInterceptor",function(){var e=q(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R["a"].lang.strategy({200:function(){var e=q(a.a.mark(function e(){var n,r,o;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.data,r={200:function(){var e=q(a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.data);case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),401:C._handleUnauthorized,700:function(){var e=q(a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw C._logout(),new Error("".concat(E(),"700-").concat(n.message));case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),760:function(){var e=q(a.a.mark(function e(){var t,r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=c()(window,"$c.$message"),t&&t.closeAll(),r=c()(window,"$c.$confirm"),!r){e.next=6;break}return e.next=6,r(n.message,"提示",{confirmButtonText:"确定",type:"warning",showCancelButton:!1,closeOnClickModal:!1,closeOnPressEscape:!1});case 6:throw C._logout(),new Error("".concat(E(),"760-").concat(n.message));case 8:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},e.next=4,R["a"].lang.strategy(r,String(n.code),q(a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("".concat(E()).concat(n.code||"null","-").concat(n.message||"后台的数据结构有误"));case 1:case"end":return e.stop()}},e)})));case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}},e)}));function n(){return e.apply(this,arguments)}return n}(),401:C._handleUnauthorized},String(t.status),q(a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("".concat(E()).concat(t.status,"-网络出现错误, http状态码为:").concat(t.status));case 1:case"end":return e.stop()}},e)})));case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e["catch"](0),e.next=11,C.errorInterceptor(e.t0);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),$(C,"plainDataResponseInterceptor",function(){var e=q(a.a.mark(function e(t){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t.data);case 4:return e.prev=4,e.t0=e["catch"](0),e.next=8,C.errorInterceptor(e.t0);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}())},ff23:function(e,t,n){var r=n("baf2");function a(e){return"number"==typeof e&&e==r(e)}e.exports=a}}]);